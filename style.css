/* Basico */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
body { background: #111; color: #eee; display: flex; align-items: center; justify-content: center; }

#gameCanvas { background: #0b1220; display: block; border: 4px solid #222; border-radius: 8px; }

.btn { cursor: pointer; padding: 10px 18px; border-radius: 8px; border: none; background: #23303b; color: #e6eef6; font-weight: 600; }
.btn:hover { transform: translateY(-2px); }
.btn.primary { background: linear-gradient(180deg,#2ea3ff,#1b6dd6); box-shadow: 0 6px 18px rgba(30,100,200,0.18); }

/* World selection */
.world-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
/* Place the Import card centered under the two presets (span all columns) */
.world-grid .world-card[data-world="import"] {
	grid-column: 1 / -1;
	justify-self: center;
	/* Make the box a bit wider while keeping it responsive */
	width: 60%;
	max-width: 720px;
}
.world-card { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.03); padding: 10px; border-radius: 10px; display:flex; flex-direction:column; align-items:center; gap:8px; cursor:pointer; color:#e6eef6; font-weight:700; }
.world-card .world-illustration { width:72px; height:48px; border-radius:8px; border:1px solid rgba(0,0,0,0.25); box-shadow: inset 0 -14px 30px rgba(0,0,0,0.12); display:block; }
.world-card .world-illustration.img, .world-card .world-illustration[src] { object-fit: cover; }
/* Explicit rule for <img> elements used as previews */
.world-card img.world-illustration { display: block; width: 72px; height: 48px; object-fit: cover; border-radius: 8px; }
.world-card .world-illustration[aria-hidden="true"] { display:block; }
.world-card .world-label { font-size:13px; color:#d7e5f0; }
.world-card .world-desc { font-size:12px; color:#9aa6b2; margin-top:4px; text-align:center; max-width:160px; }
.world-card:hover { 
	transform: translateY(-4px); 
	/* Add blue glow when hovering */
	box-shadow: 
		0 10px 22px rgba(0,0,0,0.45),
		0 0 0 3px rgba(46,163,255,0.28),
		0 14px 32px rgba(46,163,255,0.22);
	border-color: rgba(46,163,255,0.22);
}
/* Match focus-visible with similar blue glow for keyboard users */
.world-card:focus-visible {
	box-shadow: 
		0 10px 22px rgba(0,0,0,0.45),
		0 0 0 3px rgba(46,163,255,0.32),
		0 14px 32px rgba(46,163,255,0.24);
	border-color: rgba(46,163,255,0.28);
}
.world-card:focus { outline: 3px solid rgba(46,163,255,0.28); outline-offset: 2px; }
.world-card[aria-pressed="true"] { background: linear-gradient(180deg, rgba(46,163,255,0.12), rgba(30,120,200,0.06)); border-color: rgba(46,163,255,0.22); }

/* On the homepage, keep both preset cards looking the same (no blue selected fill) */
body.home-page .world-card[aria-pressed="true"] { 
	background: rgba(255,255,255,0.02); 
	border-color: rgba(255,255,255,0.03);
}
@media (max-width: 640px) { .world-grid { grid-template-columns: 1fr; } }
@media (max-width: 420px) { .world-grid { grid-template-columns: 1fr; gap:8px; } .world-card .world-illustration { width: 60px; height:40px; } }

/* Ocultar al cerrar el menu */
.hidden { display: none !important; }

/* HUD */
.hud-item { background: rgba(0,0,0,0.45); padding:8px 10px; border-radius:8px; color:#dce8f2; font-weight:600; border:1px solid rgba(255,255,255,0.03); }
#endTurnBtn { padding:8px 12px; border-radius:8px; }
.seed-input { padding:6px 8px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background: rgba(0,0,0,0.35); color:#e6eef6; }
.seed-input::placeholder { color:#9aa6b2; }

/* SelecciÃ³n y ayuda */
/* .tile-highlight no longer used */

/* Leyenda */
#legend { position: fixed; right: 18px; top: 18px; background: rgba(0,0,0,0.45); padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); z-index:30; color:#e6eef6; font-weight:600; }
.legend-item { display:flex; align-items:center; gap:8px; margin-bottom:6px; font-size:13px; }
.legend-item:last-child { margin-bottom:0; }
.swatch { width:18px; height:14px; display:inline-block; border-radius:4px; border:1px solid rgba(0,0,0,0.25); }
.sw-grass { background:#7ec97c; }
.sw-forest { background:#1f6b2e; }
.sw-mountain { background:#8b8b8b; }
.sw-river { background:#3aa7ff; }
.sw-snow { background:#e9f6ff; }
.sw-lake { background:#1b75d6; }
.sw-beach { background:#f2e394; }
.sw-lava { background:#ff5722; }

/* Controles de ajuste */
/* #tuning controls removed */

/* Tiny icon buttons (for legend open/close) */
.icon-btn { cursor: pointer; width: 26px; height: 26px; line-height: 26px; text-align: center; border-radius: 999px; border: 1px solid rgba(255,255,255,0.08); background: rgba(10,16,26,0.8); color: #e6eef6; font-weight: 900; font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; box-shadow: 0 4px 14px rgba(0,0,0,0.35); }
.icon-btn:hover { box-shadow: 0 6px 18px rgba(0,0,0,0.5); background: rgba(14,20,30,0.92); }
.legend-close { position: absolute; top: -10px; right: -10px; z-index: 2; }
.legend-open { position: fixed; right: 18px; top: 18px; z-index: 31; }

/* Independent Action Menu Layer */
/* Action menu slides in from the right when .open is added */
#actionMenuLayer { position: fixed; top: 74px; right: 0; bottom: 12px; width: 320px; z-index: 60; display:flex; align-items:flex-start; justify-content:flex-end; transform: translateX(100%); transition: transform 320ms cubic-bezier(.2,.9,.2,1); pointer-events: none; }
#actionMenuLayer.open { transform: translateX(0); pointer-events: auto; }
#actionMenuLayer .action-panel { width: 100%; margin-right:12px; background: linear-gradient(180deg, rgba(8,12,18,0.95), rgba(10,14,22,0.95)); border-radius:8px; padding:12px; border:1px solid rgba(255,255,255,0.04); box-shadow: 0 8px 40px rgba(0,0,0,0.6); color:#e6eef6; }
#actionMenuLayer .action-panel-header { font-weight:800; margin-bottom:8px; }

/* Nudge the primary move button slightly downward for visual balance */
.action-panel .action-move-btn {
	margin-top: 2px;
}
/* Button layout inside the action panel (only for the main actions row) */
#actionMenuLayer .action-panel .primary-actions > .btn { display:inline-block; width: calc(50% - 10px); margin: 8px 5px; text-align: center; vertical-align: top; }

/* Build options grid when clicking Construir */
#actionMenuLayer .build-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin: 6px 5px 4px; }
#actionMenuLayer .build-options .btn { display:block; width: 100%; margin: 0; }

/* Toast message */
#toast { position: fixed; left: 50%; transform: translateX(-50%); bottom: 24px; background: rgba(30,40,60,0.95); color:#e6f7ea; padding:8px 14px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); box-shadow: 0 6px 18px rgba(0,0,0,0.6); z-index: 80; opacity: 0; pointer-events:none; transition: opacity 220ms ease; }
#toast.show { opacity: 1; pointer-events:auto; }

/* focus styles inside the action panel */
#actionMenuLayer .action-panel :is(button,a, input, select, textarea) { outline: none; }
#actionMenuLayer .action-panel :is(button,a, input, select, textarea):focus { box-shadow: 0 0 0 3px rgba(46,163,255,0.18); border-radius:6px; }

/* ---- Home page (index.html) ---- */
/* Home page uses a column flex layout so the footer can stick to the bottom */
body.home-page { display: flex; flex-direction: column; min-height: 100vh; align-items: stretch; justify-content: flex-start; }
.topbar { position: sticky; top: 0; left: 0; right: 0; width: 100%; display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 14px 20px; background: linear-gradient(180deg, rgba(10,16,26,0.92), rgba(10,16,26,0.65)); border-bottom: 1px solid rgba(255,255,255,0.06); box-shadow: 0 8px 24px rgba(0,0,0,0.35); z-index: 5; }
.brand { font-weight: 800; letter-spacing: 0.4px; font-size: 18px; }
.nav-actions { display:flex; gap: 10px; align-items:center; }
.home-wrap { width: min(1100px, 96%); margin: 26px auto; }
@media (max-width: 540px) { .nav-actions .btn { padding: 8px 12px; } }

/* Changelog box on home page */
.home-changelog { margin-top: 16px; }
.changelog-box { background: rgba(0,0,0,0.45); border: 1px solid rgba(255,255,255,0.06); border-radius: 12px; padding: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.35); color:#e6eef6; }
.changelog-header { display:flex; align-items:center; justify-content: space-between; margin-bottom: 6px; }
.changelog-header h2 { font-size: 16px; margin: 0; letter-spacing: .2px; }
.changelog-content { max-height: 220px; overflow: auto; padding-right: 6px; }
.changelog-content ul { list-style: disc; margin: 8px 0 2px 20px; line-height: 1.7; color: #cfd9e3; }
.changelog-content li { margin: 2px 0; }
.changelog-content .chg-ver { color: #9ec5ff; font-weight: 700; }
/* Expanded state shows full content */
.changelog-box.expanded .changelog-content { max-height: none; }
/* Small button variant for header controls */
.btn.small { padding: 6px 10px; font-size: 12px; line-height: 1; }

/* ---- Map editor (map-editor.html) ---- */
body.editor-page { align-items: stretch; justify-content: stretch; }
body.editor-page #editorCanvas { background: #0b1220; display: block; border: 4px solid #222; border-radius: 8px; margin: 0; }
body.editor-page #editorSidebar { position: fixed; left: 18px; top: 18px; bottom: 18px; width: 300px; z-index: 40; display: flex; flex-direction: column; gap: 10px; overflow: auto; }
body.editor-page #editorSidebar .group { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; background: rgba(0,0,0,0.45); padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.03); }
body.editor-page :is(.select, .number, .range) { padding: 6px 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.06); background: rgba(0,0,0,0.35); color: #e6eef6; }
body.editor-page .label { color: #dce8f2; font-weight: 600; margin-right: 4px; }
/* Slider rows: slider stretches, compact label to the right */
body.editor-page #editorSidebar .slider-row { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 8px; width: 100%; }
body.editor-page #editorSidebar .slider-row .range { width: 100%; }
body.editor-page #editorSidebar .label.small { font-size: 12px; color: #bcd1e4; margin: 0 0 0 4px; white-space: nowrap; }
body.editor-page #editorTopRight { position: fixed; right: 18px; top: 18px; z-index: 40; }
body.editor-page #editorTopRight .group { background: rgba(0,0,0,0.45); padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.03); }
body.editor-page #footerRight { position: fixed; right: 18px; bottom: 18px; z-index: 30; }
body.editor-page #footerRight .group { background: rgba(0,0,0,0.45); padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.03); }
body.editor-page #editorSidebar .sidebar-tip { margin-top: auto; position: sticky; bottom: 0; background: rgba(0,0,0,0.45); padding: 8px 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.03); }
body.editor-page #canvasWrap { margin-left: 336px; /* sidebar 300 + gaps */ padding: 0 18px 0 0; }

/* ---- Footer (home page) ---- */
body.home-page .site-footer { 
	margin-top: auto; 
	width: 100%; 
	text-align: center; 
	padding: 14px 0; 
	color: #cfd9e3; 
	background: linear-gradient(180deg, rgba(10,16,26,0.65), rgba(10,16,26,0.45)); 
	border-top: 1px solid rgba(255,255,255,0.06); 
}
body.home-page .site-footer p { margin: 0; }

