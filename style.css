/* Basico */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
body { background: #111; color: #eee; display: flex; align-items: center; justify-content: center; }

#gameCanvas { background: #0b1220; display: block; border: 4px solid #222; border-radius: 8px; }

.menu-overlay { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); }
.menu { background: linear-gradient(180deg,#0f1724,#071024); padding: 28px; border-radius: 12px; width: min(420px, 92%); text-align: center; box-shadow: 0 8px 30px rgba(0,0,0,0.6); border: 1px solid rgba(255,255,255,0.04); }
.menu-title { font-size: 32px; margin-bottom: 8px; }
.menu-sub { color: #9aa6b2; margin-bottom: 18px; }
.menu-buttons { display:flex; gap: 12px; justify-content: center; margin-bottom: 12px; }
.btn { cursor: pointer; padding: 10px 18px; border-radius: 8px; border: none; background: #23303b; color: #e6eef6; font-weight: 600; }
.btn:hover { transform: translateY(-2px); }
.btn.primary { background: linear-gradient(180deg,#2ea3ff,#1b6dd6); box-shadow: 0 6px 18px rgba(30,100,200,0.18); }
.menu-hint { color: #6e7b85; font-size: 13px; }

/* World selection inside the start menu */
.world-selection { margin: 10px 0 16px; }
.world-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
.world-card { background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.03); padding: 10px; border-radius: 10px; display:flex; flex-direction:column; align-items:center; gap:8px; cursor:pointer; color:#e6eef6; font-weight:700; }
.world-card .world-illustration { width:72px; height:48px; border-radius:8px; border:1px solid rgba(0,0,0,0.25); box-shadow: inset 0 -14px 30px rgba(0,0,0,0.12); display:block; }
.world-card .world-illustration.img, .world-card .world-illustration[src] { object-fit: cover; }
/* Explicit rule for <img> elements used as previews */
.world-card img.world-illustration { display: block; width: 72px; height: 48px; object-fit: cover; border-radius: 8px; }
.world-card .world-illustration[aria-hidden="true"] { display:block; }
.world-card .world-label { font-size:13px; color:#d7e5f0; }
.world-card .world-desc { font-size:12px; color:#9aa6b2; margin-top:4px; text-align:center; max-width:160px; }
.world-card:hover { 
	transform: translateY(-4px); 
	/* Add blue glow when hovering */
	box-shadow: 
		0 10px 22px rgba(0,0,0,0.45),
		0 0 0 3px rgba(46,163,255,0.28),
		0 14px 32px rgba(46,163,255,0.22);
	border-color: rgba(46,163,255,0.22);
}
/* Match focus-visible with similar blue glow for keyboard users */
.world-card:focus-visible {
	box-shadow: 
		0 10px 22px rgba(0,0,0,0.45),
		0 0 0 3px rgba(46,163,255,0.32),
		0 14px 32px rgba(46,163,255,0.24);
	border-color: rgba(46,163,255,0.28);
}
.world-card:focus { outline: 3px solid rgba(46,163,255,0.28); outline-offset: 2px; }
.world-card[aria-pressed="true"] { background: linear-gradient(180deg, rgba(46,163,255,0.12), rgba(30,120,200,0.06)); border-color: rgba(46,163,255,0.22); }

/* On the homepage, keep both preset cards looking the same (no blue selected fill) */
body.home-page .world-card[aria-pressed="true"] { 
	background: rgba(255,255,255,0.02); 
	border-color: rgba(255,255,255,0.03);
}

@media (max-width: 640px) { .world-grid { grid-template-columns: 1fr; } .menu { width: min(92%, 520px); } }
@media (max-width: 420px) { .world-grid { grid-template-columns: 1fr; gap:8px; } .world-card .world-illustration { width: 60px; height:40px; } }

@media (max-width: 420px) { .menu-title { font-size: 24px; } }

/* Ocultar al cerrar el menu */
.hidden { display: none !important; }

/* HUD */
#hud { position: fixed; left: 18px; top: 18px; display:flex; gap:12px; align-items:center; z-index: 30; }
.hud-item { background: rgba(0,0,0,0.45); padding:8px 10px; border-radius:8px; color:#dce8f2; font-weight:600; border:1px solid rgba(255,255,255,0.03); }
#endTurnBtn { padding:8px 12px; border-radius:8px; }

.hud-controls { display:flex; gap:8px; align-items:center; }
.seed-input { padding:6px 8px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background: rgba(0,0,0,0.35); color:#e6eef6; }
.seed-input::placeholder { color:#9aa6b2; }

/* SelecciÃ³n y ayuda */
.tile-highlight { outline: 2px solid rgba(46,163,255,0.9); box-shadow: 0 3px 10px rgba(46,163,255,0.08); }

/* Leyenda */
#legend { position: fixed; right: 18px; top: 18px; background: rgba(0,0,0,0.45); padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.03); z-index:30; color:#e6eef6; font-weight:600; }
.legend-item { display:flex; align-items:center; gap:8px; margin-bottom:6px; font-size:13px; }
.legend-item:last-child { margin-bottom:0; }
.swatch { width:18px; height:14px; display:inline-block; border-radius:4px; border:1px solid rgba(0,0,0,0.25); }
.sw-grass { background:#7ec97c; }
.sw-forest { background:#1f6b2e; }
.sw-mountain { background:#8b8b8b; }
.sw-river { background:#3aa7ff; }
.sw-snow { background:#e9f6ff; }
.sw-lake { background:#1b75d6; }
.sw-beach { background:#f2e394; }

/* Controles de ajuste */
#tuning { color:#dce8f2; }
#tuning input[type="range"] { width:140px; margin-left:8px; vertical-align: middle; }

/* Independent Action Menu Layer */
/* Action menu slides in from the right when .open is added */
#actionMenuLayer { position: fixed; top: 74px; right: 0; bottom: 12px; width: 320px; z-index: 60; display:flex; align-items:flex-start; justify-content:flex-end; transform: translateX(100%); transition: transform 320ms cubic-bezier(.2,.9,.2,1); pointer-events: none; }
#actionMenuLayer.open { transform: translateX(0); pointer-events: auto; }
#actionMenuLayer .action-panel { width: 100%; margin-right:12px; background: linear-gradient(180deg, rgba(8,12,18,0.95), rgba(10,14,22,0.95)); border-radius:8px; padding:12px; border:1px solid rgba(255,255,255,0.04); box-shadow: 0 8px 40px rgba(0,0,0,0.6); color:#e6eef6; }
#actionMenuLayer .action-panel-header { font-weight:800; margin-bottom:8px; }

/* Nudge the primary move button slightly downward for visual balance */
.action-panel .action-move-btn {
	margin-top: 2px;
}
/* Button layout inside the action panel (only for the main actions row) */
#actionMenuLayer .action-panel .primary-actions > .btn { display:inline-block; width: calc(50% - 10px); margin: 8px 5px; text-align: center; vertical-align: top; }

/* Build options grid when clicking Construir */
#actionMenuLayer .build-options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin: 6px 5px 4px; }
#actionMenuLayer .build-options .btn { display:block; width: 100%; margin: 0; }

/* Toast message */
#toast { position: fixed; left: 50%; transform: translateX(-50%); bottom: 24px; background: rgba(30,40,60,0.95); color:#e6f7ea; padding:8px 14px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); box-shadow: 0 6px 18px rgba(0,0,0,0.6); z-index: 80; opacity: 0; pointer-events:none; transition: opacity 220ms ease; }
#toast.show { opacity: 1; pointer-events:auto; }

/* focus styles inside the action panel */
#actionMenuLayer .action-panel :is(button,a, input, select, textarea) { outline: none; }
#actionMenuLayer .action-panel :is(button,a, input, select, textarea):focus { box-shadow: 0 0 0 3px rgba(46,163,255,0.18); border-radius:6px; }

/* ---- Home page (index.html) ---- */
body.home-page { display: block; align-items: stretch; justify-content: stretch; }
.topbar { position: sticky; top: 0; left: 0; right: 0; width: 100%; display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 14px 20px; background: linear-gradient(180deg, rgba(10,16,26,0.92), rgba(10,16,26,0.65)); border-bottom: 1px solid rgba(255,255,255,0.06); box-shadow: 0 8px 24px rgba(0,0,0,0.35); z-index: 5; }
.brand { font-weight: 800; letter-spacing: 0.4px; font-size: 18px; }
.nav-actions { display:flex; gap: 10px; align-items:center; }
.home-wrap { width: min(1100px, 96%); margin: 26px auto; }
.home-info { margin-top: 6px; color: #cfd9e3; }
.home-info h2 { font-size: 16px; margin-bottom: 8px; color: #e6eef6; }
.home-info ul { list-style: disc; margin-left: 20px; line-height: 1.7; color: #9aa6b2; }
@media (max-width: 540px) { .nav-actions .btn { padding: 8px 12px; } }

